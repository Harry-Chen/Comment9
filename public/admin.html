<!DOCTYPE html>
<html>
	<head>
		<script src="javascripts/jquery.js" type="application/javascript"></script>
		<style>
			.yes{
				background: green;
			}
			.no{
				background: red;
			}
		</style>
		<script>
			$(function getOne(){
				$.getJSON("app/admin/fetch", null, function(data){
					if(data.id !== undefined){
						$("<tr />").append($("<td />").text(data.m))
								   .append($("<td />").text("approve").addClass("yes").click(function(){
										$.get("app/admin/approve/" + data.id);
										$(this).parent().remove();
								   }))
								   .append($("<td />").text("drop").addClass("no").click(function(){
										$(this).parent().remove();
								   }))
								   .appendTo($("#main"));
						setTimeout(getOne, 200 + Math.random() * 40 - 20);
					}else{
						getOne();
					}
				});
			});
			$(function(){
				$(window).keyup(function(e){
					if(e.keyCode == 32 || e.keyCode == 13){
						$("#main tr").eq(0).children().eq(1).click();
						e.preventDefault();
					}else if(e.keyCode == 27 || e.keyCode == 192){
						$("#main tr").eq(0).children().eq(2).click();
						e.preventDefault();
					}
				});
			});
		</script>
	</head>
	<table id="main" border=1>
	</table>
</html>