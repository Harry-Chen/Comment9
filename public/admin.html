<!DOCTYPE html>
<html>
	<head>
		<script src="javascripts/jquery.js" type="application/javascript"></script>
		<style>
			.yes{
				background: green;
			}
			.no{
				background: red;
			}
			body{
				background: black;
				color: white;
				font-size: 20px;
			}
			#main{
				margin: auto;
			}
			#mask{
				bottom: 0px;
				top: 0px;
				left: 0px;
				right: 0px;
				text-align: center;
				position: absolute;
				z-index: 100;
				background: rgba(255,0,0,0.3);
				font-size: 100px;
				line-height: 4em;
				display: none;
			}
		</style>
		<script>
		    var paused = 0;
			$(function getOne(){
				if(paused){
					setTimeout(getOne, 200 + Math.random() * 40 - 20);
				}else{
					$.getJSON("app/admin/fetch", null, function(data){
						if(data.id !== undefined){
							$("<tr />").append($("<td />").text(data.m))
									   .append($("<td />").text("approve").addClass("yes").click(function(){
											$.get("app/admin/approve/" + data.id);
											$(this).parent().remove();
									   }))
									   .append($("<td />").text("drop").addClass("no").click(function(){
											$(this).parent().remove();
									   }))
									   .prependTo($("#main"));
							setTimeout(getOne, 200 + Math.random() * 40 - 20);
						}else{
							getOne();
						}
					});
				}
			});
			$(function(){
				$(window).keyup(function(e){
					if(e.keyCode == 32 || e.keyCode == 13){
						$("#main tr").eq(0).children().eq(1).click();
						e.preventDefault();
					}else if(e.keyCode == 27 || e.keyCode == 192){
						$("#main tr").eq(0).children().eq(2).click();
						e.preventDefault();
					}else if(e.keyCode == 80){
						paused = !paused;
						$("#mask").toggle();
					}
				});
			});
		</script>
	</head>
	<table id="main" border=1>
	</table>
	<div id="mask">
	Paused
	</div>
</html>